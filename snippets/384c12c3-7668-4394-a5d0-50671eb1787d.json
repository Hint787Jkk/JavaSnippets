{
  "uuid": "384c12c3-7668-4394-a5d0-50671eb1787d",
  "name": "local export",
  "description": "local export",
  "extraSearchTerms": [],
  "tags": [
    "js"
  ],
  "code": "jQuery.fn.tableToCSV \u003d function() {\r\n\r\n\tvar clean_text \u003d function(text) {\r\n\t\ttext \u003d text.replace(/\"/g, \u0027\\\\\"\u0027).replace(/\u0027/g, \"\\\\\u0027\");\r\n\t\treturn \u0027\"\u0027 + text + \u0027\"\u0027;\r\n\t};\r\n\r\n\t$$(this).each(function() {\r\n\t\tvar table \u003d $$(this);\r\n\t\tvar caption \u003d $$(this).find(\u0027caption\u0027).text();\r\n\t\tvar title \u003d [];\r\n\t\tvar rows \u003d [];\r\n\r\n\t\t$$(this).find(\u0027tr\u0027).each(function() {\r\n\t\t\tvar data \u003d [];\r\n\t\t\tvar countColumns \u003d 0;\r\n\r\n\t\t\t$$(this).find(\u0027th\u0027).each(function() {\r\n\t\t\t\tcountColumns++;\r\n\t\t\t\tif (countColumns \u003e 2) {\r\n\t\t\t\t\tvar text \u003d clean_text($$(this).text());\r\n\t\t\t\t\ttitle.push(text);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcountColumns \u003d 0;\r\n\t\t\t$$(this).find(\u0027td\u0027).each(function() {\r\n\t\t\t\tcountColumns++;\r\n\t\t\t\tif (countColumns \u003e 2) {\r\n\t\t\t\t\tvar text \u003d clean_text($$(this).text());\r\n\t\t\t\t\tdata.push(text);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdata \u003d data.join(\";\");\r\n\t\t\trows.push(data);\r\n\t\t});\r\n\t\ttitle \u003d title.join(\";\");\r\n\t\trows \u003d rows.join(\"\\n\");\r\n\r\n\t\tvar csv \u003d title + rows;\r\n\t\tvar uri \u003d \"data:text/csv;charset\u003dutf-8,%EF%BB%BF\" + encodeURIComponent(csv);\r\n\t\tvar download_link \u003d document.createElement(\u0027a\u0027);\r\n\t\tdownload_link.href \u003d uri;\r\n\t\tvar ts \u003d new Date().getTime();\r\n\t\tif (caption \u003d\u003d \"\") {\r\n\t\t\tdownload_link.download \u003d ts + \".csv\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdownload_link.download \u003d caption + \"-\" + ts + \".csv\";\r\n\t\t}\r\n\t\tdocument.body.appendChild(download_link);\r\n\t\tdownload_link.click();\r\n\t\tdocument.body.removeChild(download_link);\r\n\t});\r\n\r\n};\r\n\r\n\r\n\r\n\r\n\t\t\u003ctable class\u003d\"table table-bordered\" id\u003d\"table_export\"\u003e\r\n\t\t\t\u003cthead\u003e\r\n\t\t\t\t\u003ctr\u003e\r\n\r\n\t\t\t\t\t\u003cth\u003e\r\n\t\t\t\t\t\tSpalte 1\r\n\t\t\t\t\t\u003c/th\u003e\r\n\t\t\t\t\t\r\n\t\t\t\t\t\u003cth\u003e\r\n\t\t\t\t\t\tSpalte 2\r\n\t\t\t\t\t\u003c/th\u003e\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\u003c/tr\u003e\r\n\t\t\t\u003c/thead\u003e\r\n\t\t\t\u003ctbody\u003e\r\n\t\t\t\t\u003ctr\u003e\r\n\t\t\t\t\t\u003ctd\u003e\r\n\t\t\t\t\t\tHallo\r\n\t\t\t\t\t\u003c/td\u003e\r\n\t\t\t\t\u003c/tr\u003e\r\n\t\t\t\t\u003ctr\u003e\r\n\t\t\t\t\t\u003ctd\u003e\r\n\t\t\t\t\t\tHallo\r\n\t\t\t\t\t\u003c/td\u003e\r\n\t\t\t\t\u003c/tr\u003e\r\n\r\n\t\t\t\u003c/tbody\u003e\r\n\t\t\u003c/table\u003e\r\n\r\n\r\n\r\n\r\n\u003cbutton id\u003d\"btn_export_suche\" name\u003d\"export_suche\" class\u003d\"btn btn-default\" type\u003d\"button\"\u003e\r\nErgebnisliste exportieren\u003c/button\u003e\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\u003cscript\u003e\r\n$$(function(){\r\n\t\r\n\t\t$$(\"#btn_export_suche\").click(function(){\r\n   \t\t\t $$(\"#table_export\").tableToCSV();\r\n   \t\t });\r\n   });\r\n\r\n\u003c/script\u003e",
  "location": "GENERIC_FILE",
  "filenameRestrictions": [
    ".js",
    ".html",
    ".php"
  ],
  "dependencies": []
}